## ✅ 외래 키

---
외래 키란 관계형 DB에서 두 테이블 간의 관계를 정의하는 키이다. <br>
외래 키는 데이터 무결성을 유지하고, 두 테이블 간의 참조 무결성을 보장한다. <br>
### ➡️ 외래 키의 특징
* <b>참조 관계 설정</b>: 외래 키는 한 테이블의 열이 다른 테이블의 기본 키를 참조하도록 만든다.
* <b>데이터 무결성</b>: 외래 키는 참조 무결성을 유지하도록 한다.
  * <i><u>참조 무결성이란?</u> 테이블 간의 데이터 일관성을 유지하기 위한 규칙이다. 참조하는 테이블과 참조되는 테이블 간의 데이터가 일치하도록 보장한다.</i>
* <b>제약 조건</b>: 외래 키는 참조되는 테이블의 데이터가 삭제되거나 업데이트될 때 어떤 동작을 취할지 제어할 수 있는 제약 조건을 가질 수 있다.
  * <u>CASCADE</u>: 참조된 데이터가 삭제되면 외래 키를 가지고 있는 행도 자동으로 삭제된다.
  * <u>SET NULL</u>: 참조된 데이터가 삭제되면 외래키 값을 NULL로 설정한다.
  * <u>RESTRICT</u>: 참조된 데이터가 삭제되거나 업데이트 되지 못하도록 막는다.
  * <u>NO ACTION</u>: 아무 동작도 취하지 않으며, 참조된 데이터가 삭제되거나 변경될 때 에러를 발생시킨다.

## ✅ 기본 키

---
기본 키란 관계형 DB에서 테이블의 각 행을 고유하게 식별하기 위해 사용되는 특수 키이다.<br>
각 테이블에는 반드시 하나의 기본 키가 있어야 하며, 기본 키는 테이블 내에서 중복될 수 없고, NULL 값을 가질 수 없다.
### ➡️ 기본 키의 특징
* <b>고유성(Unique)</b>: 기본 키는 테이블 내에서 고유해야 한다. 즉, 기본 키 값은 테이블 내의 다른 어떤 행과도 중복되지 않는다.
* <b>단일 또는 복합 키</b>: 기본 키는 하나의 열로 구성될 수 있고, 여러 열을 조합하여 만들 수도 있다. 하나의 열로 구성된 키를 <b><u>단일 키</u></b>, 
여러 열을 조합하여 만든 키를 <b><u>복합 키</u></b>라고 부른다
* <b>자동 증가 기능</b>: 기본 키는 DB에서 자동으로 증가하는 값(AUTO_INCREMENT)을 사용하여 관리할 수 있다.
* <b>외래 키의 참조 대상</b>: 기본 키는 종종 다른 테이블에서 외래 키로 참조된다. 따라서 기본 키는 테이블 간의 관계를 설정하는 중요한 역할을 한다.

## ✅ ER 다이어그램

---
ER 다이어그램은 DB 설계를 시각적으로 표현한 다이어그램으로, 시스템에서 데이터가 어떻게 조작되고 연결되는지 보여준다.<br>
주로 DB의 논리적 구조를 설계하는 단게에서 사용되며, 이를 통해 <u>엔티티와 엔티티 간의 관계</u>를 정의할 수 있다.
### ➡️ ER다이어그램 구성요소
* <b>엔티티</b>: 엔티티는 DB에서 관리하고자 하는 객체 또는 개체이다. 각 엔티티는 특정 속성을 가지고 있다.
* <b>속성</b>: 속성은 엔티티가 가지고 있는 데이터의 특성을 의미한다. 각 엔티티는 여러 속성을 가질 수 있으며, 각 속성은 엔티티의 열(Column)과 대응된다.
* <b>관계</b>: 관계는 두 개 이상의 엔티티 간의 연관성을 나타낸다. 관계는 엔티티 간의 상호작용을 의미하며, 여러 유형(1:1, N:1, N:M)이 존재한다.

## ✅ 복합 키

---
복합 키는 관계형 DB에서 두 개 이상의 열을 결합하여 하나의 기본 키를 만드는 경우를 의미한다. <br>
복합 키는 단일 열만으로는 테이블 내의 각 행을 고유하게 식별할 수 없을 때, 여러 열을 조합하여 고유성을 보장할 때 사용된다. <br>
즉, 각 열의 값은 중복될 수 있지만, <u>여러 열의 조합이 고유하면</u> 복합 키로 사용할 수 있다.
### ➡️ 복합 키의 특징
* <b>여러 열의 조합</b>: 복합 키는 두 개 이상의 열을 사용하여 각 행을 고유하게 식별한다. 단일 열만으로는 고유성을 보장할 수 없는 경우에 사용된다.
* <b>고유성 보장</b>: 복합 키를 구성하는 각 열은 개별적으로는 중복될 수 있지만, 여러 열의 조합이 고유성을 보장한다.
* <b>NULL 불허</b>: 기본 키의 속성처럼, 복합 키를 구성하는 <u>각 열의 값도 NULL을 가질 수 없다.</u> 모든 열에 값이 있어야 고유하게 식별할 수 있기 때문이다.
* <b>관계 설정</b>: 복합 키는 다른 테이블에서 외래 키로 참조될 수 있다. 복합 키를 참조하려면 <u>외래 키도 같은 수의 열로 구성되어야 한다.</u>
### ➡️ 복합 키의 예시
<b>CREATE TABLE 수강 (<br>
학생ID INT, <br>
수업ID INT, <br>
수강일 DATE, <br>
PRIMARY KEY (학생ID, 수업ID) <br>
); <br> </b>
* 위의 예시에서 학생 ID와 수업 ID를 함께 기본 키로 지정하였다. 학생 ID나 수업 ID만으로는 여러 행이 중복될 수 있지만, 
두 열의 조합은 고유해야한다.

## ✅ 연관관계

---
연관관계는 DB 설계에서 두 테이블 간의 관계를 나타낸다.<br>
이는 주로 엔티티 간의 상호작용을 정확하게 표현하고 구조화하는데 도움을 준다.
### ➡️ 연관관계의 종류
* <b>일대일 연관관계</b>
  * <u>하나의 엔티티가 다른 하나의 엔티티</u>와만 연관된다.
  * ex) 한 명의 사람은 하나의 여권만 소유할 수 있다.
* <b>일대다 연관관계</b>
  * <u>하나의 엔티티가 여러 개의 엔티티</u>와 연관될 수 있다.
  * ex) 한 명의 고객이 여러 주문을 할 수 있다.
* <b>다대일 연관관계</b>
  * <u>여러 엔티티가 하나의 엔티티</u>와 연결될 수 있다.
  * ex) 여러 주문이 한 명의 고객에게 속한다.
* <b>다대다 연관관계</b>
  * <u>여러 엔티티가 서로 여러 개의 엔티티</u>와 연관될 수 있다.
  * ex) 한 학생은 여러 수업을 들을 수 있고, 하나의 수업에 여러 학생이 참여할 수 있다.
### ➡️ 연관관계의 방향성
연관관계는 <b><u>단방향</u></b> 또는 <b><u>양방향</u></b>일 수 있다.
1. <b>단방향 연관관계</b>: 한 엔티티가 다른 엔티티와 연관되지만, 그 반대는 없다.
   * 주문 엔티티는 고객 엔티티를 참조하지만, 고객 엔티티는 주문 엔티티를 알지 못하는 것.
2. <b>양방향 연관관계</b>: 두 엔티티가 서로 참조할 수 있다. 즉, 양쪽 모두 상대 객체에 접근할 수 있다.
   * 고객은 자신이 한 주문을 알고, 주문도 해당 고객을 알 수 있는 상황.

## ✅ 정규화

---
정규화는 DB 설게에서 데이터를 구조화하고 중복을 최소화하여 데이터의 무결성을 유지하는 과정이다. <br>
정규화를 통해 DB의 테이블을 잘 분리하고, 각 테이블이 하나의 목적에 집중하도록 함으로써 <u>효율적이고 일관성 있는 DB 구조</u>를 만들 수 있다.

### ➡️ 정규화의 종류
1. <b>제 1 정규화 (1NF)</b>: 원자성 보장
   * 각 열이 더 이상 쪼갤 수 없는 원자 값을 가지도록 테이블을 구성하는 것.
   * 예시:
     * <b>비정규화된 테이블</b>
       ![](/Users/jungwookmum/Desktop/스크린샷 2024-09-25 오전 11.46.32.png)
       * 위의 예시에서 전화번호 열은 여러 값을 포함하고 있어서 원자적이지 않다.
     * <b>1차 정규화된 테이블</b>
       ![](/Users/jungwookmum/Desktop/스크린샷 2024-09-25 오전 11.47.54.png)
       * 각 칸이 하나의 값만 가지도록 수정되었다.
       <br><br>
     
2. <b>제 2 정규화 (2NF)</b>: 부분 함수 종속성 제거
   * 기본 키의 일부가 특정 열을 결정하는 부분 함수 종속을 제거하는 것.
   * 예시:
       * <b>1NF만 만족한 테이블</b>
         ![](/Users/jungwookmum/Desktop/스크린샷 2024-09-25 오전 11.49.29.png)
           * 위에서 고객이름은 고객ID에만 종속되므로, 부분 함수 종속을 야기한다.
       * <b>2차 정규화된 테이블</b>
         ![](/Users/jungwookmum/Desktop/스크린샷 2024-09-25 오전 11.57.19.png)
           * 이렇게 두 테이블로 분리하면 고객이름은 고객ID에만 종속되므로 부분 함수 종속이 제거된다.
             <br><br>
        
3. <b>제 3 정규화 (3NF)</b>: 이행적 함수 종속 제거
   * <u>기본 키가 아닌 속성이 다른 기본 키가 아닌 속성을 결정하는</u> 이행적 함수 종속을 제거하는 것.
   * 예시:
     * <b>2NF만 만족한 테이블</b>
       ![](/Users/jungwookmum/Desktop/스크린샷 2024-09-25 오전 11.59.43.png)
        * 여기서 기본 키는 직원 ID이지만, 부서이름은 부서ID에 의해 결정되므로 이행적 함수 종속이 존재한다.
     * <b>3차 정규화된 테이블</b>
       ![](/Users/jungwookmum/Desktop/스크린샷 2024-09-25 오후 12.00.51.png)
       * 이렇게 테이블을 분리하면 이행적 함수 종속이 제거된다.

### ➡️ 정규화의 장점
1. <b>중복 데이터 최소화</b>: 데이터를 나누어 중복을 줄임으로써 저장 공간을 효율적으로 사용한다.
2. <b>데이터 일관성 보장</b>: 데이터를 수정할 때 여러 테이블에 걸친 일관성을 유지할 수 있다.
3. <b>데이터 무결성 강화</b>: 삽입, 갱신, 삭제 시 데이터 이상을 방지한다.

### ➡️ 정규화의 단점
1. <b>복잡성 증가</b>: 테이블이 많이 분리되면 쿼리가 복잡해지고 성능이 저하될 수 있다.
2. <b>조인 연산 증가</b>: 분리된 테이블을 다시 결합하기 위해 조인 연산이 많아질 수 있어 성능에 영향을 줄 수 있다.

## 반 정규화

---
반 정규화는 정규화를 통해 나눈 테이블을 성능 향상 등의 목적으로 다시 합치거나, <br>
중복 데이터를 허용하는 방식으로 구조를 단순화 하는 과정이다.

### ➡️ 반 정규화의 목적
* <b>성능 개선</b>: 지나치게 많은 테이블 간의 조인 연산을 줄이고, 데이터 조회 속도를 높이기 위해 사용된다.
* <b>쿼리 최적화</b>: 특정 쿼리의 응답 시간을 줄이기 위해 일부 중복 데이터를 허용하거나, 테이블을 합쳐 쿼리 구조를 단순화할 수 있다.
* <b>복잡성 감소</b>: DB 구조를 단순하게 만들어 개발자나 운영자가 쉽게 다룰 수 있도록 한다.

### ➡️ 반 정규화의 방식
1. <b>테이블 병합</b>: 정규화 과정에서 나눈 테이블을 다시 결합하여 조인 연산을 줄이는 방식.
2. <b>중복 데이터 추가</b>: 일부 데이터를 중복 저장하여 <u>특정 데이터를 빠르게 조회</u>할 수 있도록 한다. 
주로 조회 빈도가 높거나 성능 이슈가 있는 경우 사용된다.
3. <b>계산된 열 추가</b>: <u>자주 사용되는 값이나 계산된 데이터</u>를 미리 테이블에 저장해둔다.
이를 통해 매번 계산하지 않고, 저장된 결과를 바로 조회할 수 있다.
4. <b>데이터 복제</b>: 데이터가 자주 조회되는 경우, 이를 <u>분산된 복제본에 저장</u>하여 데이터 읽기 성능을 향상시킨다.
5. <b>중간 테이블 추가</b>: 주로 대량의 데이터를 요약하거나 집계하여 성능을 개선한다.
   * ex) 매일매일 판매 데이터를 실시간으로 분석하는 대신에 일별 또는 월별 판매 요약 테이블을 만들어서 성능을 향상시킨다.

### ➡️ 반 정규화의 장점
1. <b>성능 향상</b>: 여러 테이블을 조인할 필요 없이, 필요한 데이터를 빠르게 조회할 수 있어 성능이 개선된다.
2. <b>간단한 쿼리</b>: 데이터 구조가 단순해져 복잡한 쿼리가 줄어들고, 이해 및 유지보수가 쉬워진다.
3. <b>빠른 데이터 접근</b>: 중복 데이터를 통해 자주 조회하는 데이터를 더 빠르게 접근할 수 있다.

### ➡️ 반 정규화의 단점
1. <b>데이터 중복</b>: 데이터를 중복 저장함으로써 저장 공간이 더 많이 필요하고, 데이터 일관성 문제가 발생할 가능성이 커진다.
2. <b>데이터 무결성 저하</b>: 중복 데이터가 존재하면 삽입, 수정, 삭제 작업 시 여러 테이블에서 데이터를 일관성 있게 관리하기가 어렵다.
3. <b>유지보수 복잡성</b>: 데이터가 중복되거나 병합된 경우, 데이터 수정 및 관리가 복잡해질 수 있다.